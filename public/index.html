<!DOCTYPE html>
<html>
  <head>
    <title>LoLover</title>
    <link rel="icon" href="./images/ico.png  " type="image/x-icon">
    <style>
      

      .container {
        width: 100%;
        margin: 0 auto;
      }

      .header {
        text-align: center;
        color: #658ec6; /* Green header text */
        margin-bottom: 20px;
      }

      .neumorphism {
        background: #ffffff; /* Dark gray box background */
        border-radius: 8px;
        padding: 8px;
        box-shadow: 8px 8px 16px rgba(160, 224, 233, 0.342),
          -8px -8px 16px rgba(174, 232, 255, 0.445); /* Green and dark gray box shadow */
      }

      .team-container {
        display: flex;
        justify-content: space-between;
      }

      .team-data {
        width: calc(50% - 20px);
      }

      /* label {
        display: block;
        margin-bottom: 5px;
      } */

      select {
        width: 100%;
        padding: 10px;
        border: 1px solid #c9ddf8; /* Green border */
        border-radius: 4px;
        margin-bottom: 15px;
        background: linear-gradient(to right top, #65dfc9, #6cdbeb);
        color: #658ec6; /* Green text color */
      }

      .result-json {
        background-color: #ffffff; /* Dark gray box background */
        border: 1px solid #c9ddf8; /* Green border */
        border-radius: 4px;
        padding: 10px;
        font-family: "Courier New", monospace;
        text-align: left;
        margin-top: 10px;
        box-shadow: 0 2px 4px rgba(0, 255, 0, 0.1); /* Green box shadow */
        color: #658ec6; /* Green text color */
      }

      .json {
        white-space: pre-wrap;
      }

      #jsonTableTeam1,
      #jsonTableTeam2 {
        width: 100%;
        border-collapse: collapse;
        margin-top: 10px;
      }

      #jsonTableTeam1 th,
      #jsonTableTeam1 td,
      #jsonTableTeam2 th,
      #jsonTableTeam2 td {
        border: 1px solid #c9ddf8; /* Green border */
        padding: 8px;
        text-align: left;
      }

      #jsonTableTeam1 th,
      #jsonTableTeam2 th {
        background-color: #ffffff; /* Dark gray background */
        color: #658ec6; /* Green text color */
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      h1 {
        color: #426696;
        font-weight: 600;
        font-size: 3rem;
        opacity: 0.8;
      }
      h2,
      p {
        color: #658ec6;
        font-weight: 500;
        opacity: 0.8;
      }

      h3 {
        color: #426696;
        font-weight: 600;
        opacity: 0.8;
      }

      main {
        font-family: "Poppins", sans-serif;
        min-height: 100vh;
        background: linear-gradient(to right top, #65dfc9, #6cdbeb);
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .glass {
        background: white;
        min-height: 90vh;
        width: 85%;
        background: linear-gradient(
          to right bottom,
          rgba(255, 255, 255, 0.7),
          rgba(255, 255, 255, 0.3)
        );
        border-radius: 2rem;
        z-index: 2;
        backdrop-filter: blur(2rem);
        display: flex;
      }
      .circle1,
      .circle2 {
        background: white;
        background: linear-gradient(
          to right bottom,
          rgba(255, 255, 255, 0.8),
          rgba(255, 255, 255, 0.3)
        );
        height: 20rem;
        width: 20rem;
        position: absolute;
        border-radius: 50%;
      }

      .circle1 {
        top: 5%;
        right: 15%;
      }
      .circle2 {
        bottom: 5%;
        left: 10%;
      }
      .dashboard {
        flex: 1;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: space-evenly;
        text-align: center;
        background: linear-gradient(
          to right bottom,
          rgba(255, 255, 255, 0.7),
          rgba(255, 255, 255, 0.3)
        );
        border-radius: 2rem;
      }
      .link {
        display: flex;
        margin: 2rem 0rem;
        padding: 1rem 5rem;
        align-items: center;
      }
      .link h2 {
        padding: 0rem 2rem;
      }

      .games {
        flex: 2;
      }

      .pro {
        background: linear-gradient(to right top, #65dfc9, #6cdbeb);
        border-radius: 2rem;
        color: white;
        /* padding: 1rem; */
        position: relative;
      }

      .pro img {
        position: absolute;
        top: -10%;
        right: 10%;
      }
      .pro h2 {
        width: 40%;
        color: white;
        font-weight: 600;
      }

      /* GAMES */
      .status {
        margin-bottom: 3rem;
      }

      .status input {
        background: linear-gradient(
          to right bottom,
          rgba(255, 255, 255, 0.7),
          rgba(255, 255, 255, 0.3)
        );
        border: none;
        width: 50%;
        padding: 0.5rem;
        border-radius: 2rem;
      }

      .games {
        margin: 5rem;
        display: flex;
        flex-direction: column;
        justify-content: space-evenly;
      }

      .card {
            display: flex;
        background: linear-gradient(
          to left top,
          rgba(255, 255, 255, 0.8),
          rgba(255, 255, 255, 0.5)
        );
        border-radius: 1rem;
        margin: 2rem 0rem;
        padding: 2rem;
        box-shadow: 6px 6px 20px rgba(122, 122, 122, 0.212);
        justify-content: space-around;
      }

      .progress {
        background: linear-gradient(to right top, #65dfc9, #6cdbeb);
        width: 100%;
        height: 25%;
        border-radius: 1rem;
        position: relative;
        overflow: hidden;
      }
      .progress::after {
        content: "";
        width: 100%;
        height: 100%;
        background: rgb(236, 236, 236);
        position: absolute;
        left: 60%;
      }
      .card-info {
        display: flex;
        flex-direction: column;
        justify-content: space-between;
      }

      .telegram-link {
      /* position: relative; */
      /* width: 50px;
      height: 50px; */
      /* overflow: hidden; */
      /* border-radius: 50%; */
      z-index: 1;
      transform-style: preserve-3d;
      animation: rotateTelegram 4s infinite linear;
    }

   

    @keyframes rotateTelegram {
      0%, 20%, 50%, 80%, 100% {
        transform: rotateX(0deg) rotateY(0deg);
      }
      40% {
        transform: rotateX(-20deg) rotateY(15deg);
      }
      60% {
        transform: rotateX(15deg) rotateY(-15deg);
      }
    }

    .telegram-link a {
      text-decoration: none; /* Remover sublinhado do link */
    }
  

      
      
    </style>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/default.min.css"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.min.js"></script>
  </head>
  <body>
    <main>
      <section class="glass">
        <div class="dashboard">
          <div class="user">
            <img src="./images/xdelucca.png" alt="" />
            <h3>DeLucca Tips</h3>
          </div>
          <h2 class="telegram-link">
            <a href="https://t.me/DeLuccaTips">
              <img src="./images/telegram.png" alt="telegram" /> <h3>Telegram</h3>
            </a>
          </h2>
          </div>
          <div class="pro">
            
          </div>
        </div>
        <div class="games">
          <div class="status">
            <h1 class="header">LoLOver</h1>
            <input type="text" />
          </div>
          <div class="cards">
            <div class="card">
              <img src="./images/assassins.png" alt="" />
              <div class="card-info">
                <div class="container neumorphism">
                  <label for="leagueSelect">Selecione a Liga:</label>
                  <select
                    id="leagueSelect"
                    class="neumorphism"
                    onchange="loadTeams()"
                  >
                    <option value="">Selecione a Liga</option>
                    <!-- As opções serão preenchidas dinamicamente -->
                  </select>

                  <label for="teamSelect1">Selecione o Time 1:</label>
                  <select
                    id="teamSelect1"
                    class="neumorphism"
                    onchange="calculateSum()"
                  >
                    <option value="">Selecione o Time 1</option>
                    <!-- As opções serão preenchidas dinamicamente -->
                  </select>

                  <label for="teamSelect2">Selecione o Time 2:</label>
                  <select
                    id="teamSelect2"
                    class="neumorphism"
                    onchange="calculateSum()"
                  >
                    <option value="">Selecione o Time 2</option>
                    <!-- As opções serão preenchidas dinamicamente -->
                  </select>

                  <div class="result-json neumorphism">
                    <div class="team-container">
                      <div class="team-data">
                        <h2 id="team1Name">Time 1</h2>
                        <table id="jsonTableTeam1">
                          <thead>
                            
                          </thead>
                          <tbody>
                            <!-- As linhas da tabela serão preenchidas dinamicamente para o Time 1 -->
                          </tbody>
                        </table>
                      </div>
                      <div class="team-data">
                        <h2 id="team2Name">Time 2</h2>
                        <table id="jsonTableTeam2">
                          <thead>
                            
                          </thead>
                          <tbody>
                            <!-- As linhas da tabela serão preenchidas dinamicamente para o Time 2 -->
                          </tbody>
                        </table>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
    </main>
    <div class="circle1"></div>
    <div class="circle2"></div>

    <script>
      // Função para realçar a sintaxe do JSON usando Highlight.js
      function highlightJSON() {
        const jsonResult = document.getElementById("jsonResult");
        hljs.highlightBlock(jsonResult);
      }

      // Função para formatar o JSON com quebras de linha antes de exibi-lo na tabela
      function formatJSON(jsonString) {
        try {
          const jsonObject = JSON.parse(jsonString);
          return JSON.stringify(jsonObject, null, 2);
        } catch (error) {
          console.error("Erro ao formatar o JSON:", error);
          return jsonString;
        }
      }

      function loadJSON(callback) {
        const xhr = new XMLHttpRequest();
        xhr.overrideMimeType("application/json");
        xhr.open("GET", "data.json", true);
        xhr.onreadystatechange = function () {
          if (xhr.readyState === 4 && xhr.status == "200") {
            callback(xhr.responseText);
          }
        };
        xhr.send(null);
      }

      function loadTeams() {
        const selectedLeague = document.getElementById("leagueSelect").value;
        if (!selectedLeague) {
          return;
        }

        loadJSON(function (response) {
          const data = JSON.parse(response);
          const leagueData = data.find(
            (item) => item.league === selectedLeague
          );

          if (!leagueData) {
            return;
          }

          const teamSelect1 = document.getElementById("teamSelect1");
          const teamSelect2 = document.getElementById("teamSelect2");
          teamSelect1.innerHTML =
            "<option value=''>Selecione o Time 1</option>";
          teamSelect2.innerHTML =
            "<option value=''>Selecione o Time 2</option>";

          const teams = leagueData.teams;
          teams.forEach((team) => {
            teamSelect1.innerHTML += `<option value="${team.teamName}">${team.teamName}</option>`;
            teamSelect2.innerHTML += `<option value="${team.teamName}">${team.teamName}</option>`;
          });
        });
      }

      function calculateSum() {
        const selectedLeague = document.getElementById("leagueSelect").value;
        const selectedTeam1 = document.getElementById("teamSelect1").value;
        const selectedTeam2 = document.getElementById("teamSelect2").value;

        if (!selectedLeague || !selectedTeam1 || !selectedTeam2) {
          return;
        }

        loadJSON(function (response) {
          const data = JSON.parse(response);
          const leagueData = data.find(
            (item) => item.league === selectedLeague
          );

          if (!leagueData) {
            return;
          }

          const teams = leagueData.teams;
          const team1 = teams.find((team) => team.teamName === selectedTeam1);
          const team2 = teams.find((team) => team.teamName === selectedTeam2);

          if (!team1 || !team2) {
            return;
          }

          const sumDataTeam1 = {
            AverageTowers: (
              parseFloat(team1.mediaTorres) + parseFloat(team1.mediaTorres)
            ).toFixed(2),
            AverageDragons: (
              parseFloat(team1.mediaDragoes) + parseFloat(team1.mediaDragoes)
            ).toFixed(2),
            AverageBarons: (
              parseFloat(team1.mediaBarons) + parseFloat(team1.mediaBarons)
            ).toFixed(2),
            AverageTime: (
              (parseFloat(team1.mediaDuracaoPartidas) +
                parseFloat(team1.mediaDuracaoPartidas)) /
              2
            ).toFixed(2),
            AverageKills: (
              (((parseFloat(team1.ckpm) + parseFloat(team1.ckpm)) / 2).toFixed(
                2
              ) *
                (
                  parseFloat(team1.mediaDuracaoPartidas) +
                  parseFloat(team1.mediaDuracaoPartidas)
                ).toFixed(2)) /
              2
            ).toFixed(2),
          };

          const sumDataTeam2 = {
            AverageTowers: (
              parseFloat(team2.mediaTorres) + parseFloat(team2.mediaTorres)
            ).toFixed(2),
            AverageDragons: (
              parseFloat(team2.mediaDragoes) + parseFloat(team2.mediaDragoes)
            ).toFixed(2),
            AverageBarons: (
              parseFloat(team2.mediaBarons) + parseFloat(team2.mediaBarons)
            ).toFixed(2),
            AverageTime: (
              (parseFloat(team2.mediaDuracaoPartidas) +
                parseFloat(team2.mediaDuracaoPartidas)) /
              2
            ).toFixed(2),
            AverageKills: (
              (((parseFloat(team2.ckpm) + parseFloat(team2.ckpm)) / 2).toFixed(
                2
              ) *
                (
                  parseFloat(team2.mediaDuracaoPartidas) +
                  parseFloat(team2.mediaDuracaoPartidas)
                ).toFixed(2)) /
              2
            ).toFixed(2),
          };

          const team1NameElement = document.getElementById("team1Name");
          team1NameElement.textContent = selectedTeam1;

          const team2NameElement = document.getElementById("team2Name");
          team2NameElement.textContent = selectedTeam2;

          const jsonTableTeam1 = document.getElementById("jsonTableTeam1");
          jsonTableTeam1.innerHTML = `
                    <thead>
                    </thead>
                    <tbody>
                        <tr><td>AverageTowers</td><td>${sumDataTeam1.AverageTowers}</td></tr>
                        <tr><td>AverageDragons</td><td>${sumDataTeam1.AverageDragons}</td></tr>
                        <tr><td>AverageBarons</td><td>${sumDataTeam1.AverageBarons}</td></tr>
                        <tr><td>AverageTime</td><td>${sumDataTeam1.AverageTime}</td></tr>
                        <tr><td>AverageKills</td><td>${sumDataTeam1.AverageKills}</td></tr>
                    </tbody>
                `;

          const jsonTableTeam2 = document.getElementById("jsonTableTeam2");
          jsonTableTeam2.innerHTML = `
                    <thead>
                        
                    </thead>
                    <tbody>
                        <tr><td>AverageTowers</td><td>${sumDataTeam2.AverageTowers}</td></tr>
                        <tr><td>AverageDragons</td><td>${sumDataTeam2.AverageDragons}</td></tr>
                        <tr><td>AverageBarons</td><td>${sumDataTeam2.AverageBarons}</td></tr>
                        <tr><td>AverageTime</td><td>${sumDataTeam2.AverageTime}</td></tr>
                        <tr><td>AverageKills</td><td>${sumDataTeam2.AverageKills}</td></tr>
                    </tbody>
                `;

          // Realce de sintaxe usando Highlight.js
          highlightJSON();
        });
      }

      // Chamar a função para preencher o menu suspenso ao carregar a página
      loadJSON(function (response) {
        const data = JSON.parse(response);
        const leagues = data.map((item) => item.league);

        const leagueSelect = document.getElementById("leagueSelect");
        leagueSelect.innerHTML = "<option value=''>Selecione a Liga</option>";
        leagues.forEach((league) => {
          leagueSelect.innerHTML += `<option value="${league}">${league}</option>`;
        });
      });
    </script>
  </body>
</html>
